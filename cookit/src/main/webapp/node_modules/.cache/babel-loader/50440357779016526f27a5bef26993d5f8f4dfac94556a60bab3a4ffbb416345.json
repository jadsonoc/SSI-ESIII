{"ast":null,"code":"import VueCookies from \"vue-cookies\";\nimport { decodeCredential } from \"vue3-google-login\";\nimport axios from \"axios\";\n//import Swal from \"sweetalert2\";\n\nexport default {\n  name: \"NavMenu\",\n  data() {\n    return {\n      user: {\n        name: \"\",\n        email: \"\"\n      },\n      loggedUser: {\n        id: \"\",\n        name: \"\",\n        email: \"\",\n        lactoseIntolerant: false,\n        glutenIntolerant: false,\n        oilseedsIntolerant: false,\n        favouritedRecipes: [],\n        preparedRecipes: []\n      },\n      userGoogleLoginData: [],\n      logged: false\n    };\n  },\n  mounted() {\n    if (VueCookies.isKey(\"userId\")) {\n      this.logged = true;\n      this.loggedUser.id = VueCookies.get(\"userId\");\n    }\n  },\n  methods: {\n    callback(response) {\n      this.userGoogleLoginData = decodeCredential(response.credential);\n      this.user.email = this.userGoogleLoginData.email;\n      this.user.name = this.userGoogleLoginData.name;\n      this.userLogin(this.user);\n    },\n    handleLogout() {\n      this.logged = false;\n      if (VueCookies.isKey(\"userId\")) VueCookies.remove(\"userId\");\n    },\n    userLogin(user) {\n      axios.post(\"/userManager/login\", user).then(response => {\n        this.loggedUser = response.data;\n        VueCookies.set(\"userId\", response.data.id, \"15m\");\n        if (VueCookies.isKey(\"userId\")) {\n          this.logged = true;\n          VueCookies.set(\"userLactoseIntolerant\", response.data.lactoseIntolerant, \"15m\");\n          VueCookies.set(\"userGlutenIntolerant\", response.data.glutenIntolerant, \"15m\");\n          VueCookies.set(\"userOilseedsIntolerant\", response.data.oilseedsIntolerant, \"15m\");\n        }\n        return response;\n      }).catch(error => {\n        return error;\n      });\n    }\n  }\n};","map":{"version":3,"names":["VueCookies","decodeCredential","axios","name","data","user","email","loggedUser","id","lactoseIntolerant","glutenIntolerant","oilseedsIntolerant","favouritedRecipes","preparedRecipes","userGoogleLoginData","logged","mounted","isKey","get","methods","callback","response","credential","userLogin","handleLogout","remove","post","then","set","catch","error"],"sources":["/Volumes/SDDisk2/workspace/IFRS/ES3/SSI-ESIII/cookit/src/main/webapp/src/components/NavMenu.vue"],"sourcesContent":["<template>\n  <nav class=\"navbar navbar-expand-lg navbar-light bg-light px-3\">\n    <a class=\"navbar-brand\" href=\"/\">\n      <img src=\"../assets/img/logo2_mini_bg.png\" alt=\"\" width=\"90\" height=\"30\" />\n    </a>\n    <div\n      class=\"collapse navbar-collapse d-flex flex-row-reverse\"\n      id=\"navbarNavAltMarkup\"\n    >\n      <div class=\"navbar-nav\">\n        <a\n          class=\"nav-item nav-link\"\n          :class=\"[this.$route.path == '/' ? 'active' : '']\"\n          href=\"/\"\n          >Home</a\n        >\n        <a\n          class=\"nav-item nav-link\"\n          :class=\"[this.$route.path.includes('recipe') ? 'active' : '']\"\n          href=\"/recipe/list\"\n          >All Recipes</a\n        >\n        <a\n          class=\"nav-item nav-link\"\n          :class=\"[this.$route.path.includes('food') ? 'active' : '']\"\n          href=\"/food/list\"\n          >All Ingredients</a\n        >\n        <div v-if=\"!logged\">\n          <GoogleLogin :callback=\"callback\" auto-login /><!-- removi prompt -->\n        </div>\n\n        <router-link\n          v-if=\"logged\"\n          :to=\"`/user/edit/${loggedUser.id}`\"\n          class=\"nav-item nav-link\"\n          :class=\"[this.$route.path.includes('user') ? 'active' : '']\"\n          >Profile</router-link\n        >\n\n        <a v-if=\"logged\" class=\"nav-item nav-link\" @click=\"handleLogout()\">\n          Log Out\n        </a>\n      </div>\n    </div>\n  </nav>\n</template>\n\n<script>\nimport VueCookies from \"vue-cookies\";\nimport { decodeCredential } from \"vue3-google-login\";\nimport axios from \"axios\";\n//import Swal from \"sweetalert2\";\n\nexport default {\n  name: \"NavMenu\",\n  data() {\n    return {\n      user: {\n        name: \"\",\n        email: \"\",\n      },\n      loggedUser: {\n        id: \"\",\n        name: \"\",\n        email: \"\",\n        lactoseIntolerant: false,\n        glutenIntolerant: false,\n        oilseedsIntolerant: false,\n        favouritedRecipes: [],\n        preparedRecipes: [],\n      },\n      userGoogleLoginData: [],\n      logged: false,\n    };\n  },\n  mounted() {\n    if (VueCookies.isKey(\"userId\")) {\n      this.logged = true;\n      this.loggedUser.id = VueCookies.get(\"userId\");\n    }\n  },\n  methods: {\n    callback(response) {\n      this.userGoogleLoginData = decodeCredential(response.credential);\n      this.user.email = this.userGoogleLoginData.email;\n      this.user.name = this.userGoogleLoginData.name;\n      this.userLogin(this.user);\n    },\n    handleLogout() {\n      this.logged = false;\n      if (VueCookies.isKey(\"userId\")) VueCookies.remove(\"userId\");\n    },\n    userLogin(user) {\n      axios\n        .post(\"/userManager/login\", user)\n        .then((response) => {\n          this.loggedUser = response.data;\n          VueCookies.set(\"userId\", response.data.id, \"15m\");\n          if (VueCookies.isKey(\"userId\")) {\n            this.logged = true;\n            VueCookies.set(\"userLactoseIntolerant\", response.data.lactoseIntolerant, \"15m\");\n            VueCookies.set(\"userGlutenIntolerant\", response.data.glutenIntolerant, \"15m\");\n            VueCookies.set(\"userOilseedsIntolerant\", response.data.oilseedsIntolerant, \"15m\");\n          }\n          return response;\n        })\n        .catch((error) => {\n          return error;\n        });\n    },\n  },\n};\n</script>\n"],"mappings":"AAiDA,OAAOA,UAAS,MAAO,aAAa;AACpC,SAASC,gBAAe,QAAS,mBAAmB;AACpD,OAAOC,KAAI,MAAO,OAAO;AACzB;;AAEA,eAAe;EACbC,IAAI,EAAE,SAAS;EACfC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJF,IAAI,EAAE,EAAE;QACRG,KAAK,EAAE;MACT,CAAC;MACDC,UAAU,EAAE;QACVC,EAAE,EAAE,EAAE;QACNL,IAAI,EAAE,EAAE;QACRG,KAAK,EAAE,EAAE;QACTG,iBAAiB,EAAE,KAAK;QACxBC,gBAAgB,EAAE,KAAK;QACvBC,kBAAkB,EAAE,KAAK;QACzBC,iBAAiB,EAAE,EAAE;QACrBC,eAAe,EAAE;MACnB,CAAC;MACDC,mBAAmB,EAAE,EAAE;MACvBC,MAAM,EAAE;IACV,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAIhB,UAAU,CAACiB,KAAK,CAAC,QAAQ,CAAC,EAAE;MAC9B,IAAI,CAACF,MAAK,GAAI,IAAI;MAClB,IAAI,CAACR,UAAU,CAACC,EAAC,GAAIR,UAAU,CAACkB,GAAG,CAAC,QAAQ,CAAC;IAC/C;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,QAAQA,CAACC,QAAQ,EAAE;MACjB,IAAI,CAACP,mBAAkB,GAAIb,gBAAgB,CAACoB,QAAQ,CAACC,UAAU,CAAC;MAChE,IAAI,CAACjB,IAAI,CAACC,KAAI,GAAI,IAAI,CAACQ,mBAAmB,CAACR,KAAK;MAChD,IAAI,CAACD,IAAI,CAACF,IAAG,GAAI,IAAI,CAACW,mBAAmB,CAACX,IAAI;MAC9C,IAAI,CAACoB,SAAS,CAAC,IAAI,CAAClB,IAAI,CAAC;IAC3B,CAAC;IACDmB,YAAYA,CAAA,EAAG;MACb,IAAI,CAACT,MAAK,GAAI,KAAK;MACnB,IAAIf,UAAU,CAACiB,KAAK,CAAC,QAAQ,CAAC,EAAEjB,UAAU,CAACyB,MAAM,CAAC,QAAQ,CAAC;IAC7D,CAAC;IACDF,SAASA,CAAClB,IAAI,EAAE;MACdH,KAAI,CACDwB,IAAI,CAAC,oBAAoB,EAAErB,IAAI,EAC/BsB,IAAI,CAAEN,QAAQ,IAAK;QAClB,IAAI,CAACd,UAAS,GAAIc,QAAQ,CAACjB,IAAI;QAC/BJ,UAAU,CAAC4B,GAAG,CAAC,QAAQ,EAAEP,QAAQ,CAACjB,IAAI,CAACI,EAAE,EAAE,KAAK,CAAC;QACjD,IAAIR,UAAU,CAACiB,KAAK,CAAC,QAAQ,CAAC,EAAE;UAC9B,IAAI,CAACF,MAAK,GAAI,IAAI;UAClBf,UAAU,CAAC4B,GAAG,CAAC,uBAAuB,EAAEP,QAAQ,CAACjB,IAAI,CAACK,iBAAiB,EAAE,KAAK,CAAC;UAC/ET,UAAU,CAAC4B,GAAG,CAAC,sBAAsB,EAAEP,QAAQ,CAACjB,IAAI,CAACM,gBAAgB,EAAE,KAAK,CAAC;UAC7EV,UAAU,CAAC4B,GAAG,CAAC,wBAAwB,EAAEP,QAAQ,CAACjB,IAAI,CAACO,kBAAkB,EAAE,KAAK,CAAC;QACnF;QACA,OAAOU,QAAQ;MACjB,CAAC,EACAQ,KAAK,CAAEC,KAAK,IAAK;QAChB,OAAOA,KAAK;MACd,CAAC,CAAC;IACN;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}